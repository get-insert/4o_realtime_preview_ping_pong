# 4o_realtime_preview_ping_pong

AzureやOpenAIのRealtimeAPI（4o-realtime-preview）のレイテンシーや安定性が時間帯や時期によって安定しないという疑惑をはっきりさせるためのAPI監視サービス

## 📋 プロジェクト概要

このプロジェクトは、OpenAI Realtime API（4o-realtime-preview）とAzure Speech Servicesのリアルタイム音声処理機能の性能と安定性を継続的に監視・評価するためのツールです。

### 🎯 主な目的

- **レイテンシー測定**: セッション開始から音声認識・合成までの各段階のレイテンシーを測定
- **安定性評価**: 時間帯や時期による性能変動の監視
- **WebSocket接続性能**: 接続確立からセッション開始までの時間測定
- **ファンクションコール性能**: リアルタイムファンクションコールの応答時間と成功率の監視

## 🔧 技術仕様

### 監視対象API
- **OpenAI Realtime API (4o-realtime-preview)**
  - WebSocket接続によるリアルタイム音声処理
  - 音声認識（Speech-to-Text）
  - 音声合成（Text-to-Speech）
  - リアルタイムファンクションコール

- **Azure Speech Services**
  - 同等のリアルタイム音声処理機能
  - 比較対象としての性能評価

### 測定項目
1. **接続レイテンシー**
   - WebSocket接続確立時間
   - セッション開始までの時間
   - 初期化完了までの時間

2. **音声処理レイテンシー**
   - 音声入力から文字起こしまでの時間
   - テキスト入力から音声合成までの時間
   - 1ターン目、2ターン目...の処理時間推移

3. **ファンクションコール性能**
   - ファンクションコール実行時間
   - 成功率とエラー率
   - 応答品質の評価

4. **安定性指標**
   - 接続断線率
   - タイムアウト発生率
   - エラー発生パターン

## 📊 監視スケジュール

- **定期監視**: 1分間隔での自動ピンポンテスト
- **詳細分析**: 時間帯別（朝・昼・夕・夜）の性能比較
- **長期トレンド**: 日次・週次・月次の性能推移分析
- **アラート機能**: 閾値を超えた性能劣化時の通知

## 🚀 実装予定機能

### コア機能
- [ ] WebSocket接続管理
- [ ] 音声データの自動生成・送信
- [ ] レイテンシー測定ロジック
- [ ] データ収集・保存システム
- [ ] リアルタイムダッシュボード

### 分析機能
- [ ] 統計分析（平均、分散、パーセンタイル）
- [ ] 時系列分析
- [ ] 異常検知アルゴリズム
- [ ] レポート生成機能

### 運用機能
- [ ] アラート・通知システム
- [ ] ログ管理
- [ ] 設定管理UI
- [ ] API認証情報管理

## 🛠 技術スタック（AWSサーバーレス構成）

### フロントエンド
- **React** / **TypeScript** - SPAアプリケーション
- **Chart.js** / **D3.js** - データ可視化
- **Tailwind CSS** - UIスタイリング
- **AWS S3** - 静的ホスティング
- **CloudFront** - CDN配信

### バックエンド（サーバーレス）
- **AWS Lambda** - サーバーレス関数
  - WebSocket接続管理
  - レイテンシー測定ロジック
  - データ処理・分析
- **API Gateway** - REST API・WebSocket API
- **DynamoDB** - NoSQLデータベース
  - 時系列データ保存
  - 設定情報管理
  - ユーザーセッション管理

### インフラ・運用
- **AWS CloudWatch** - ログ・メトリクス監視
- **AWS EventBridge** - スケジュール実行
- **AWS SNS** - アラート通知
- **GitHub Actions** - CI/CD
- **AWS SAM** - サーバーレスアプリケーション管理

### コスト最適化
- **従量課金**: 使用した分だけの課金
- **自動スケーリング**: 負荷に応じた自動リソース調整
- **無料枠活用**: AWS Lambda、DynamoDBの無料枠を最大活用
- **データ保持期間**: 古いデータの自動削除によるストレージコスト削減

## 📈 期待される成果

1. **定量的な性能評価**
   - 各APIの実際の性能データの蓄積
   - 時間帯による性能変動の可視化
   - ベンチマーク比較の実現

2. **運用改善**
   - 性能劣化の早期発見
   - 最適な時間帯の特定
   - コスト効率の最適化

3. **技術的知見**
   - リアルタイムAPIの性能特性の理解
   - 最適な実装パターンの確立
   - 障害対策の強化

## 🔄 開発フェーズ

### Phase 1: 基本実装
- AWS Lambda + DynamoDBの基本構成
- WebSocket接続の基本実装
- 単純なピンポンテスト
- 基本的なレイテンシー測定

### Phase 2: 機能拡張
- 音声処理の統合
- ファンクションコールテスト
- S3静的ホスティングの設定
- 基本的なダッシュボード

### Phase 3: 分析・可視化
- 詳細なダッシュボード実装
- 統計分析機能
- アラート機能
- CloudWatch統合

### Phase 4: 運用・最適化
- 本格運用開始
- コスト最適化
- 機能拡張
- パフォーマンスチューニング

## ☕ コーヒー支援

このプロジェクトの開発・運用には継続的なコストがかかります。もしこのプロジェクトが役に立ったら、コーヒー一杯分の支援をいただけますと幸いです。

- **Buy Me a Coffee**: [準備中]
- **Ko-fi**: [準備中]
- **GitHub Sponsors**: [準備中]

ご支援いただいた方には、特別な機能へのアクセスや優先サポートを提供予定です。

## 📝 ライセンス

MIT License

## 🤝 コントリビューション

このプロジェクトへの貢献を歓迎します。以下の方法で参加できます：

- バグレポート
- 機能要望
- プルリクエスト
- ドキュメント改善

## 📞 連絡先

プロジェクトに関する質問や提案がありましたら、Issueを作成してください。

